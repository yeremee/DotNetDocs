---
title: "How to: Set Headers in the Client Request (WCF Data Services)"
description: Learn how to handle the SendingRequest event to add a new header to the request message before it is sent to the data service in WCF Data Services.
ms.date: "03/30/2017"
dev_langs: 
  - "csharp"
  - "vb"
helpviewer_keywords: 
  - "WCF Data Services, customizing requests"
ms.assetid: 3d55168d-5901-4f48-8117-6c93da3ab5ae
---
# How to: Set Headers in the Client Request (WCF Data Services)
When you use the WCF Data Services client library to access a data service that supports the Open Data Protocol (OData), the client library automatically sets the required HTTP headers in request messages sent to the data service. However, the client library does not know to set message headers that are required in certain cases, such as when the data service requires claims-based authentication or cookies. For more information, see [Securing WCF Data Services](securing-wcf-data-services.md#clientAuthentication). In these cases, you must manually set message headers in the request message before it is sent. The example in this topic shows how to handle the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event to add a new header to the request message before it is sent to the data service.  
  
 The example in this topic uses the Northwind sample data service and autogenerated client data service classes. This service and the client data classes are created when you complete the [WCF Data Services quickstart](quickstart-wcf-data-services.md). You can also use the [Northwind sample data service](https://services.odata.org/Northwind/Northwind.svc/) that is published on the OData Web site; this sample data service is read-only and attempting to save changes returns an error. The sample data services on the OData website allow anonymous authentication.  
  
## Example  
 The following example registers a handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and then executes a query against the data service.  
  
> [!NOTE]
> When a data service requires you to manually set the message header for every request, consider registering the handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event by overriding the `OnContextCreated` partial method in the entity container that represents the data service, which in this case is `NorthwindEntities`.  
  
[!code-csharp[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#registerheadersquery)]
[!code-vb[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#registerheadersquery)]
  
## Example  
 The following method handles the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and adds an Authentication header to the request.  
  
 [!code-csharp[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#onsendingrequest)]  
 [!code-vb[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#onsendingrequest)]  
  
## See also

- [Securing WCF Data Services](securing-wcf-data-services.md)
- [WCF Data Services Client Library](wcf-data-services-client-library.md)
